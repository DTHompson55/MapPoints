<!DOCTYPE html>
<html>
<head>
<title>Simple Map</title>
<meta name="viewport" content="initial-scale=1.0">
<meta charset="utf-8">
<style>
/* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
#map {
	height: 100%;
}
/* Optional: Makes the sample page fill the window. */
html, body {
	height: 100%;
	margin: 0;
	padding: 0;
}
</style>
<script>
var	connections =  [
	[411, 415, 418],
	[415, 416, 413],
	[413, 412, 414],
	[418, 419],
	[419, 416, 423],
	[416, 454],
	[421, 414, 424],
	[414, 450, 421],
	[423, 424],
	[424, 443],
	[443, 427, 445],
	[427, 425, 428],
	[425, 422, 426],
	[432, 451],
	[451, 436],
	[436, 440],
	[440, 439],
	[439, 438],
	[438, 451],
	[444, 445], 
	[445, 447], 
	[447, 449], 
	[449, 450],
	[428, 432],
	[452, 426, 438],
	[452, 425, 428],
	[453, 440],
	[454, 421, 455]];
	
function lookup(id){
	for (var i = 0 ; i < points.length; i++){
		if ( points[i].id == id) return points[i];
	}
	return null;	
}	

var	points= [

	{ id: 411, lat:  43.66097772700435 , lng: -79.39452141523361, type: 'point' },
	{ id: 412, lat:  43.660403362711776 , lng: -79.39428269863129, type: 'point' },
	{ id: 413, lat:  43.66052949047658 , lng: -79.39433097839355, type: 'point' },
	{ id: 414, lat:  43.66063621376289 , lng: -79.39382940530777, type: 'point' },
	{ id: 415, lat:  43.6607565197855 , lng: -79.39442485570908, type: 'point' },
	{ id: 416, lat:  43.66086130225391 , lng: -79.39392060041428, type: 'point' },
	{ id: 418, lat:  43.661088330304300, lng:	-79.394013807177500, type: 'point' },
	{ id: 419, lat:  43.660971905772186 , lng: -79.39396351575851, type: 'point' },
	{ id: 421, lat:  43.66067114134269 , lng: -79.39382940530777, type: 'point' },
	{ id: 422, lat:  43.66086906391096 , lng: -79.39294159412384, type: 'point' },
	{ id: 423, lat:  43.6610378797036 , lng: -79.39363360404968, type: 'point' },
	{ id: 424, lat:  43.66074196665043 , lng: -79.39350083470345, type: 'point' },
	{ id: 425, lat:  43.660859361839485 , lng: -79.39297914505005, type: 'point' },
	{ id: 426, lat:  43.66059546489414 , lng: -79.3928611278534, type: 'point' },
	{ id: 427, lat:  43.66084189810689 , lng: -79.39305424690247, type: 'point' },
	{ id: 428, lat:  43.66072828762182 , lng: -79.39299867817793, type: 'point' },
	{ id: 432, lat:  43.660849659766455 , lng: -79.3924480676651, type: 'point' },
	{ id: 436, lat:  43.6608007918746 , lng: -79.39234614372253 , type: 'point' },
	//               43.660810851458606 , lng: -79.39236089587212
	//         lat:  43.66080891104256 , lng:-79.39236491918564, type: 'point' },
	//, type: 'point' }
	{ id: 438, lat:  43.66077204312568 , lng: -79.3925017118454, type: 'point' },
	{ id: 439, lat:  43.6606245712318 , lng: -79.39244270324707, type: 'point' },
	{ id: 440, lat:  43.660649796713024 , lng: -79.39229518175125, type: 'point' },
	{ id: 443, lat:  43.660770102708376 , lng: -79.39337074756622, type: 'point' },
	{ id: 444, lat:  43.66062263080973 , lng: -79.3933117389679, type: 'point' },
	{ id: 445, lat:  43.66068860512496 , lng: -79.39333587884903, type: 'point' },
	{ id: 447, lat:  43.66063039249762 , lng: -79.39357995986938, type: 'point' },
	{ id: 449, lat:  43.660576060661214 , lng: -79.39356118440628, type: 'point' },
	{ id: 450, lat:  43.66052949047658 , lng: -79.39377576112747, type: 'point' },
	{ id: 451, lat:  43.66078891104256 , lng: -79.3924280676651, type: 'point' },
	{ id: 452, lat:  43.66069054554491 , lng: -79.39291477203369, type: 'point' },
	{ id: 453, lat:  43.6606197201765 ,  lng: -79.39227640628815 , type: 'point' },
	{ id: 454, lat: 43.660744877277715 , lng: -79.39386695623398 , type: 'point'},
	{ id: 455, lat: 43.66077495375152 , lng: -79.3937261402607 , type: 'point'}
];



</script>
<script type="text/javascript" src="scripts/socket.io.min.js"></script>
<script type="text/javascript" src="scripts/pin_cushion.js"></script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAn1eiTrucOIwWjPe5rQL8ExfvmFqOhTQs&callback=initMap"
	async defer></script>
<script>
	var initmapvalues = {
		center : {
			lat : 43.6607598,
			lng : -79.3936388
		},
		zoom : 20
	};
</script>

</head>
<body>
	<div id="map"></div>
	<script>
		var i = 0;
		var map;
		var test_index = 0;
		function initMap() {
			map = new google.maps.Map(document.getElementById('map'),
					initmapvalues);

			google.maps.event.addListener(map, 'click', function(event) {
				for (var j = 0; j < connections[i].length; j++){
					pointId = connections[i][j];
					point = lookup(pointId);
					
				point.itemType = "Point";
				point.itemId = "P" + point.id;
				point.colorId = 1;
				parse(point);
				}		
				i++;
			});
		}
	</script>

	<script>
		var socket = {};//io();
		$(document).ready(function() {
			//socket.on('message', function(msg) {
			//	parse(msg);
			//});
		});

		var pin_colors = [ "http://www.google.com/mapfiles/markerA.png",
				"http://maps.google.com/mapfiles/ms/icons/green-dot.png",
				"http://maps.google.com/mapfiles/ms/icons/red-dot.png",
				"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png" ];

		function pin_color(i) {
			return pin_colors[i % 3];
		}

		function parse(msg) {

			var marker_pos = new google.maps.LatLng(msg.lat, msg.lng);
			var marker = new google.maps.Marker({
				position : marker_pos,
				icon : new google.maps.MarkerImage(pin_color(msg.colorId)),
				title : msg.itemType + " #" + msg.itemId,
				map : map
			});

			marker.id = msg.id;
			pins.put(marker);
		}
	</script>

</body>
</html>